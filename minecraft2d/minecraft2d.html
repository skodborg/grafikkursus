<!DOCTYPE html>
<html>
<head>
<link rel='stylesheet' href='style.css' />
<script id="vertex-shader" type="x-shader/x-vertex">

attribute vec4 vPosition;
attribute vec4 vColor;
uniform float rippleTime;
uniform vec2 rippleLocation;

varying vec4 fColor;
varying vec4 fPosition;

void
main()
{
    //float scale = length(rippleLocation - vec2(vPosition)) / 10.0;
    //vec4 pos = vPosition + vec4(vPosition.x + (rippleTime * scale), vPosition.y + (rippleTime * scale), 0.0, 1.0);

    float dist = distance(rippleLocation, vec2(vPosition));
    float diff = dist - rippleTime;
    float powDiff = 1.0 - pow(abs(diff* 10.0), 0.8);
    float diffTime = diff * powDiff;
    vec2 diffUV = normalize(vec2(vPosition) - rippleLocation);
    vec2 pos = vec2(vPosition) + (diffUV * diffTime);
    gl_Position = vec4(pos, 0.0, 1.0);
    fColor = vColor;
    fPosition = vPosition;
}
</script>

<script id="fragment-shader" type="x-shader/x-fragment">

precision mediump float;

varying vec4 fColor;
varying vec4 fPosition;

void
main()
{
    float offset = (sqrt(pow(0.04-(mod(fPosition.x+0.04, 0.08)),2.0) + pow(0.04-(mod(fPosition.y+0.04, 0.08)),2.0)))*9.0;
    vec4 color;
    color.r = fColor.r - offset;
    color.g = fColor.g - offset;
    color.b = fColor.b - offset;
    color.a = 1.0;
    gl_FragColor = color;
}
</script>

    <script src="initWebGL.js"></script>
    <script type="text/javascript" src="Common/webgl-utils.js"></script>
    <script type="text/javascript" src="Common/webgl-debug.js"></script>
    <script type="text/javascript" src="Common/initShaders.js"></script>
    <script type="text/javascript" src="Common/MV.js"></script>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="minecraft2d.js"></script>
    <script type="text/javascript" src="Box.js"></script>
    <script type="text/javascript" src="worldUtil.js"></script>
    <script src="initWebGL.js"></script>
</head>

<body>
<canvas id="gl-canvas" width="500" height="500">
    Oops ... your browser doesn't support the HTML5 canvas element
</canvas>
<select id="material">
    <option value="0">Rock</option>
    <option value="1">Fire</option>
    <option value="2">Pee</option>
    <option value="3">Grass</option>
    <option value="4">Water</option>
    <option value="5">Metal</option>
</select>
</body>
</html>
